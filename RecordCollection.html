<html lang="it">
	<head>
		<title>Free Code Camp - Record Collection challenge</title>
		<meta charset="utf-8">
		<meta name="author" content="Maurizio Aru">
		<meta name="description" content="A Record Collection challenge test">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">	</head>
		
		<!--  BOOTSTRAP CORE -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>	</body>

		<!-- page scripts -->
		<script>
			
// Setup
var collection = {
    "2548": {
      "album": "Slippery When Wet",
      "artist": "Bon Jovi",
      "tracks": [ 
        "Let It Rock", 
        "You Give Love a Bad Name" 
      ]
    },
    "2468": {
      "album": "1999",
      "artist": "Prince",
      "tracks": [ 
        "1999", 
        "Little Red Corvette" 
      ]
    },
    "1245": {
      "artist": "Robert Palmer",
      "tracks": [ ]
    },
    "5439": {
      "album": "ABBA Gold"
    }
};
			
// Keep a copy of the collection for tests
var collectionCopy = JSON.parse(JSON.stringify(collection));

// Only change code below this line
function updateRecords(id, prop, value) {
  
  if ( (prop !== "tracks") && (value !== "") ) {
    collection[id][prop] = value;
  }
  else if ( (prop == "tracks") && (value !== "")) {
    if (!collection[id].hasOwnProperty("tracks")){
      collection[id][prop] = [""];
      collection[id][prop].push(value);
    }
    else {
      collection[id].tracks.push(value);
    }
  }
  else if ( value === "") {
    delete collection[id][prop];
  }
}
			
$(document).load(collection_text.value = collectionCopy);

// Alter values below to test your code
/* ** TEST calls **
updateRecords(5439, "artist", "ABBA");
updateRecords(5439, "tracks", "Take a Change on Me");
updateRecords(2548, "artist", "");
updateRecords(1245, "tracks", "Addicted to Love");
updateRecords(2468, "tracks", "Free");
updateRecords(2548, "tracks", "");
*/
			function test1(){
				var result = updateRecords(5439, "artist", "ABBA");
				
				$(document).collection_text.value = JSON.parse(JSON.stringify(collection));
			}
			
			function test2(){
				var result = updateRecords(5439, "tracks", "Take a Change on Me");
				
				$(document).collection_text.value = JSON.parse(JSON.stringify(collection));
			}

		</script>
	</head>
	<body>
		<div class="content">
			<div class="row">
				<div class="col-xs-12">
					<h1>Record Collection</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<textarea id="collection_text">
						-- nothing to read --
					</textarea>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-4">
					<button type="button" class="btn btn-default" onclick="test1();">Test 1</button>
				</div>
				<div class="col-xs-4">
					<button type="button" class="btn btn-default" onclick="test2();">Test 2</button>
				</div>
				<div class="col-xs-4">
					<button type="button" class="btn btn-default" onclick="test3();">Test 3</button>
				</div>
			</div>
		</div>
	</body>
</html>